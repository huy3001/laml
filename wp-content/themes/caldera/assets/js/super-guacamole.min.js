/**
 * super-guacamole - Super Guacamole! It's a script that hides your menu items if they don't fit the menu width.
 * @version v1.1.5
 * @link https://github.com/dkfiresky/super-guacamole#readme
 * @license GPL-3.0+
*/
!function(t,e){function n(e){var n,i,r=this;n={id:"",href:"",title:"&middot;&middot;&middot;",children:{},templates:{},container:null},i=t.extend(n,e),r.id=i.id,r.href=i.href,r.title=i.title,r.children=i.children,r.templates=i.templates,r.$container=i.container,r.node=null,r.attachedNode=null,r.options={},r.visible=!0}var i={menu:'<li class="%1$s"><a href="%2$s">%3$s</a>%4$s</li>',child_wrap:"<ul>%s</ul>",child:'<li class="%1$s" id="%5$s"><a href="%2$s">%3$s</a><ul class="sub-menu">%4$s</ul></li>'};n.prototype.set=function(t){if(!1==t instanceof n)throw new Error("Invalid argument type");return this.children[t.id]=t,this},n.prototype.push=function(t){return this.set(t)},n.prototype.get=function(t){var e=null;return this.map(t,function(t,n){return e=n,n}),e},n.prototype.map=function(t,e,n){var i={id:t},r=this;return"string"!=typeof t&&(i=t),n=n||this.children,0>=n.length?i:(Object.keys(n).forEach(function(t){child=n[t],i.id===child.id?n[i.id]=e(child):child.children&&0<Object.keys(child.children).length&&(i=r.map(i,e,child.children))}),i)},n.prototype.has=function(t){return e!==this.children[t]},n.prototype.isVisible=function(){return this.visible},n.prototype.forEach=function(t){return this.children.forEach(t)},n.prototype.countVisibleAttachedNodes=function(){var e=this,n=-1;return Object.keys(e.children).forEach(function(i){t(e.children[i].getAttachedNode()).attr("hidden")||n++}),n},n.prototype.countVisibleNodes=function(){var e,n=this,i=0;return Object.keys(n.children).forEach(function(r){e=n.children[r],t(e.getNode()).attr("hidden")||i++}),i},n.prototype.countVisible=function(){var t=this,e=0;return Object.keys(t.children).forEach(function(n){t.children[n].isVisible()&&e++}),e},n.prototype.getNode=function(){return this.node},n.prototype.getAttachedNode=function(){return this.attachedNode},n.prototype.setNode=function(t){this.node=t},n.prototype.attachNode=function(t){this.attachedNode=t},n.prototype.setOptions=function(t){return this.options=t,this},n.prototype.getOptions=function(){return this.options},n.prototype.render=function(){function e(t,n,i){var r=t.replace(new RegExp("\\%"+n+"\\$s","g"),i);return pipes={replace:function(t,n){return e(r,t,n),pipes},get:function(){return r}},pipes}function n(t,i,r){var o="",a=Object.keys(i.children);return r=r||!1,a.forEach(function(t){o+=n("super-guacamole__menu__child",i.children[t])}),e(r?d:c,1,t+" menu-item"+(0<a.length?" menu-item-has-children":"")).replace(2,i.href).replace(3,i.title).replace(4,0<a.length?o:"").replace(5,i.id).get().replace('<ul class="sub-menu"></ul>',"")}function i(t){var e="";return Object.keys(t).forEach(function(i){e+=n("super-guacamole__menu",t[i])}),e}var r,o=this,c=o.templates.menu,d=o.templates.child,a=o.$container;o.options.$menu;return 0<a.length&&(a.append(i([o])),a.find(".super-guacamole__menu__child").each(function(){$current_el=t(this),id=t(this).attr("id"),r=t("#"+id.replace("sg-","")),0<r.length&&o.map(id,function(t){return t.attachNode(r),t.setNode($current_el),t})})),this},n.extract=function(e){var i,r,o,c,d={};return e.each(function(e,a){i=t(a),r=i.find("a[href]:first"),o=new n({id:"sg-"+i.attr("id"),href:r.attr("href"),title:r.get(0).childNodes[0].data}),o.attachNode(i),-1<i.children(".sub-menu").length&&(subMenu=n.extract(i.children(".sub-menu").children(".menu-item")),Object.keys(subMenu).forEach(function(t){c=subMenu[t],o.set(c)})),d[o.id]=o}),d},n.prototype.attachedNodesFit=function(){var e,n,i=this,r=0,o=0,c=i.$container.outerWidth(!0)-i.$container.find(".super-guacamole__menu").outerWidth(!0)-(parseInt(t(".header-container > .container").css("padding-left"),10)+parseInt(t(".header-container > .container").css("padding-left"),10))/2;return Object.keys(i.children).forEach(function(r){n=i.children[r],$attachedNode=t(n.getAttachedNode()),e=t(n.getNode()),$attachedNode.removeAttr("hidden"),e.attr("hidden",!0)}),Object.keys(i.children).forEach(function(d){n=n=i.children[d],$attachedNode=t(n.getAttachedNode()),e=t(n.getNode()),o=$attachedNode.outerWidth(!0),o>0&&$attachedNode.data("width",o),r+=$attachedNode.data("width"),r>c&&($attachedNode.attr("hidden",!0),e.removeAttr("hidden"))}),!0},n.prototype.menuFit=function(e){var n,i=this,r={removeAttr:function(t,e){return t.removeAttr(e)},attr:function(t,e){return t.attr(e,!0)}},o="removeAttr",c=i.options.threshold||768;return e=e||!1,0===i.countVisibleNodes()&&(o="attr"),c-1>=t(window).width()&&(Object.keys(i.children).forEach(function(e){n=i.children[e],$attachedNode=t(n.getAttachedNode()),$node=t(n.getNode()),$attachedNode.removeAttr("hidden"),$node.attr("hidden",!0)}),o="attr"),e||r[o](i.$container.find(".super-guacamole__menu"),"hidden"),"removeAttr"===o},n.prototype.watch=function(e){function n(){r.attachedNodesFit(),r.menuFit()}function i(t){var e;return function(i){function r(){n(),timeout=null}e&&clearTimeout(e),e=setTimeout(r,t)}}var r=this;return(e=e||!1)?(n(),r):(t(window).on("resize",i(10)),t(window).on("orientationchange",i(10)),r)},t.fn.superGuacamole=function(e){var r,o,c,d,a=t(this),h=a.find("#main-menu");r={threshold:544,minChildren:3,childrenFilter:"li",menuTitle:"&middot;&middot;&middot;",menuUrl:"#",templates:i},o=t.extend(r,e),c=h.children(o.childrenFilter+":not(.super-guacamole__menu):not(.super-guacamole__menu__child)"),d=new n({title:o.menuTitle,href:o.menuUrl,templates:o.templates,children:n.extract(c),container:h}),o.$menu=h,window.caldera_sg=d,d.setOptions(o).render().watch(!0).watch()}}(jQuery);